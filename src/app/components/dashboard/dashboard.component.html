<main>
    <div class="container">
        <div class="add-product w-1/2 mt-8 flex justify-between mx-auto">
            <div class="title">
                <h2 class="font-semibold text-2xl">All Products</h2>
            </div>
            <div class="add">
                <button class="bg-green-600 px-4 py-2 rounded-md text-white" (click)="displayInputs()">Add Product</button>
            </div>
        </div>
        <table class="w-1/4 text-xs md:text-sm md:w-1/2 lg:w-9/12 mx-auto mt-8 border-2 border-gray-200 bg-gray-100 text-gray-800">
            <thead class="border border-white bg-gray-500 text-white">
                <tr>
                  <th class="border border-white px-1 md:px-6 py-2 text-xs md:text-[1rem]">Image</th>
                  <th class="border border-white px-1 md:px-4 py-2 text-xs md:text-[1rem]">Title</th>
                  <th class="border border-white px-1 md:px-4 py-2 text-xs md:text-[1rem]">Price</th>
                  <th class="border border-white px-1 md:px-4 py-2 text-xs md:text-[1rem]">Description</th>
                  <th class="border border-white px-1 md:px-4 py-2 text-xs md:text-[1rem]">Update</th>
                  <th class="border border-white px-1 md:px-4 py-2 text-xs md:text-[1rem]">Delete</th>
                </tr>
            </thead>
            <tbody class="border border-white">
                @for(product of allProducts; track $index)
                {
                    <tr class="border border-white text-center">
                        <td class="border border-gray-100 bg-white "><img [src]="product.image" alt="" class="w-8 h-8 md:w-14 md:h-14 mx-auto rounded-full"/></td>
                        <td class="border border-white">{{product.title | shortTitle}}</td>
                        <td class="border border-white">{{product.price}}</td>
                        <td class="border border-white py-1 px-1 md:py-2 md:px-3 text-left">{{product.description}}</td>
                        <td class="border border-white px-1 md:px-3"><button class="bg-yellow-500 px-3 py-1 rounded-md text-white" (click)="updateProduct(product)">Updated</button></td>
                        <td class="border border-white"><button class="bg-red-600 px-3 py-1 rounded-md text-white" (click)="deleteProduct($index)">Delete</button></td>
                    </tr>
                }
            </tbody>
        </table>
        @if(isShow)
        {
            <div class="employees-inputs w-full flex items-center justify-center overflow-hidden h-full absolute top-0 left-0 right-0 bottom-0 ">
                <div class="inputs w-1/2 mx-auto bg-white p-3 rounded-md shadow-lg">
                   <form [formGroup]="addProductForm" (ngSubmit)="submitAddForm()">
                    <div class="title mt-3">
                        <input type="text" formControlName="title" class="w-full px-3 py-2 rounded-md text-gray-500 border border-gray-200 placeholder:text-gray-300 focus:border-gray-300 focus:outline-none" placeholder="Title..." >
                     </div>
                     <div class="price mt-3">
                        <input type="number" formControlName="price" class="w-full px-3 py-2 rounded-md text-gray-500 border border-gray-200 placeholder:text-gray-300 focus:border-gray-300 focus:outline-none" placeholder="Price..."/>
                     </div>
                     <div class="image mt-3">
                        <input type="file" formControlName="image"/>
                     </div>
                     <div class="categories mt-3">
                        <select  class="border border-gray-300 w-full rounded-md p-2">
                            <option selected value="All">All</option>
                            @for (category of allCategories; track $index) 
                            {
                                <option value="{{category}}">{{category}}</option>
                            }
                        </select>
                     </div>
                     <div class="description mt-3">
                        <textarea formControlName="description" class="w-full px-3 py-2 rounded-md text-gray-500 border border-gray-200 placeholder:text-gray-300 focus:border-gray-300 focus:outline-none" placeholder="Description..."></textarea>
                     </div>
                     <div class="buttons mt-4">
                        <button type="submit"  class="w-1/4 mt-8 px-2 mr-4 py-2 rounded-md bg-green-600" > Add </button>
                         <button class="w-1/4 mt-8 px-2 py-2 mr-4 rounded-md bg-yellow-600"> Update </button>
                        <button class="w-1/4 mt-8 px-2 py-2 rounded-md bg-red-600" (click)="hideInputs()"> Cancel </button> 
                     </div>
                   </form>
                </div>
            </div>
        }
    </div>
</main>